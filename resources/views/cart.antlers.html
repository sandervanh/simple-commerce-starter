---
just_head: true
---

{{ if {cart:count} === 0 }}
    {{ redirect to='/' }}
{{ /if }}

<div class="flex flex-col-reverse md:flex-row items-stretch md:h-full md:overflow-hidden">
    <main class="bg-white w-full md:w-2/3 md:h-screen md:overflow-scroll">
        <div class="w-full md:w-2/3 lg:w-1/2 mx-auto px-4 md:px-0 my-6">
            <header class="hidden md:flex justify-center py-4 border-b">
                <a class="text-gray-800 text-center font-medium text-2xl" href="/">{{ site_name }}</a>
            </header>

            <div class="flex flex-col mb-2 py-2 my-6">
                <h3 class="font-bold text-2xl mb-4 text-gray-800">Your Cart</h3>
        
                <table class="table-auto mx-auto w-full">
                    <thead class="bg-gray-100">
                        <tr>
                            <th class="px-4 py-2">Product</th>
                            <th class="px-4 py-2">Quantity</th>
                            <th class="px-4 py-2">Price</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{ cart:items }}
                        <tr>
                                <td class="border px-4 py-2">
                                    <a href="/products/{{ product:slug }}">{{ product:title }} ({{ variant:sku }})</a>
                                    {{ simple-commerce:form for='cartDelete' class='mt-2' }}
                                        <input type="hidden" name="line_item" value="{{ uuid }}">
            
                                        <button class="text-red-700 font-medium text-sm focus:outline-none" type="submit">Remove</button>
                                    {{ /simple-commerce:form }}
                                </td>
                                <td class="border px-4 py-2">
                                    <div class="flex justify-center items-center">
                                        {{ simple-commerce:form for='cartUpdate' class='flex justify-center items-center' }}
                                            <input type="hidden" name="line_item" value="{{ uuid }}">
            
                                            <select name="quantity" onchange="parentElement.submit()">
                                                {{ loop from='1' to='{ variant:max_quantity }' }}
                                                    <option value="{{ value }}" {{ if quantity == value }} selected {{ /if }}>{{ value }}x</option>
                                                {{ /loop }}
                                            </select>
                                        {{ /simple-commerce:form }}
                                    </div>
                                </td>
                                <td class="border px-4 py-2">{{ total | price }}</td>
                            </tr>
                        {{ /cart:items }}
                        <tr>
                            <td class="px-4 py-2"></td>
                            <td class="py-2">
                                {{ simple-commerce:form for='cartDelete' }}
                                    <input type="hidden" name="clear" value="true">
                                    <button class="text-gray-700 font-medium text-center focus:outline-none" type="submit">Clear Cart</button>
                                {{ /simple-commerce:form }}
                            </td>
                            <td class="py-2"></td>
                        </tr>
                    </tbody>
                </table>

                {{ simple-commerce:form for='redeemCoupon' redirect='/cart' id='redeemCoupon' }}
                <div class="flex flex-col mb-2 py-2">
                    <h3 class="font-bold text-lg mb-2 text-gray-800">Redeem a Coupon</h3>

                    <div class="flex flex-row items-start w-full">
                        <input class="md:w-2/3 border rounded p-2 mb-2 text-gray-600 focus:text-gray-800 outline-none mr-2" type="text" name="coupon" placeholder="Coupon Code" value="{{ old:coupon }}" required>
                        <div x-data="{ loading: false }" class="md:w-1/3 flex flex-row items-center">
                            <button
                                x-show="loading === true"
                                class="bg-blue-600 hover:bg-blue-500 py-2 px-6 uppercase text-white font-bold w-full h-full flex flex-row items-center justify-center"
                                type="button">
                                <div class="lds-dual-ring mr-6"></div>
                            </button>

                            <button
                                x-show="loading === false"
                                class="bg-blue-600 hover:bg-blue-500 py-2 px-6 uppercase text-white font-bold w-full h-full"
                                type="button"
                                @click.prevent="loading = true; document.getElementById('redeemCoupon').submit()">
                                Redeem
                            </button>
                        </div>
                    </div>

                    <!-- <div x-data="{ loading: false }" class="flex justify-center md:w-1/2 mx-auto">
                        <button
                            x-show="loading === true"
                            class="bg-blue-600 hover:bg-blue-500 py-2 px-6 uppercase text-white font-bold flex flex-row items-center justify-center"
                            type="button">
                            <div class="lds-dual-ring mr-6"></div>
                            Working...
                        </button>

                        <button
                            x-show="loading === false"
                            class="bg-blue-600 hover:bg-blue-500 py-2 px-6 uppercase text-white font-bold"
                            type="button"
                            @click.prevent="loading = true; document.getElementById('cartAddress').submit()">
                            Go to Checkout
                        </button>
                    </div> -->
                </div>
                {{ /simple-commerce:form }}

                {{ simple-commerce:form for='cartUpdate' redirect='/checkout' id='cartAddress' }}
                    <div x-data="{ billingSameAsShipping: true }">
                        <div class="flex flex-col mb-2 py-2">
                            <h3 class="font-bold text-lg mb-2 text-gray-800">Shipping Address</h3>
    
                            <input class="border rounded p-2 mb-2 text-gray-600 focus:text-gray-800 outline-none" type="text" name="shipping_name" placeholder="Name" value="{{ old:shipping_name }}">
                            <input class="border rounded p-2 mb-2 text-gray-600 focus:text-gray-800 outline-none" type="text" name="shipping_address_1" placeholder="Address" value="{{ old:shipping_address_1 }}">
                            <input class="border rounded p-2 mb-2 text-gray-600 focus:text-gray-800 outline-none" type="text" name="shipping_city" placeholder="City" value="{{ old:city }}">
                            <div class="flex flex-row items-stretch mb-2">
                                <select class="md:w-1/2 border rounded p-2 mb-2 outline-none mr-2" name="shipping_country" value="{{ old:shipping_country }}">
                                    {{ simple-commerce:countries }}
                                        <option value="{{ iso }}">{{ name }}</option>
                                    {{ /simple-commerce:countries }}
                                </select>
                                <input class="md:w-1/2 border rounded p-2 mb-2 text-gray-600 focus:text-gray-800 outline-none ml-2" type="text" name="shipping_zip_code" placeholder="Postal Code" value="{{ old:shipping_zip_code }}">
                            </div>
                            <label class="mb-2 text-gray-800 flex flex-row items-center">
                                <input class="border rounded p-2 mr-2" type="checkbox" name="use_shipping_address_for_billing" x-model="billingSameAsShipping">
                                Use same address for billing
                            </label>
                        </div>
    
                        <template x-if="billingSameAsShipping === false">
                            <div class="flex flex-col mb-2 py-2">
                                <h3 class="font-bold text-lg mb-2 text-gray-800">Billing Address</h3>
    
                                <input class="border rounded p-2 mb-2 text-gray-600 focus:text-gray-800 outline-none" type="text" name="billing_name" placeholder="Name" value="{{ old:billing_name }}">
                                <input class="border rounded p-2 mb-2 text-gray-600 focus:text-gray-800 outline-none" type="text" name="billing_address_1" placeholder="Address" value="{{ old:billing_address_1 }}">
                                <input class="border rounded p-2 mb-2 text-gray-600 focus:text-gray-800 outline-none" type="text" name="billing_city" placeholder="City" value="{{ old:billing_city }}">
                                <div class="flex flex-row items-stretch mb-2">
                                    <select class="md:w-1/2 border rounded p-2 mb-2 outline-none mr-2" name="billing_country" value="{{ old:billing_country }}">
                                        {{ simple-commerce:countries }}
                                            <option value="{{ iso }}">{{ name }}</option>
                                        {{ /simple-commerce:countries }}
                                    </select>
                                    <input class="md:w-1/2 border rounded p-2 mb-2 text-gray-600 focus:text-gray-800 outline-none ml-2" type="text" name="billing_zip_code" placeholder="Postal Code" value="{{ old:billing_zip_code }}">
                                </div>
                            </div>
                        </template>

                        <div x-data="{ loading: false }" class="flex justify-center md:w-1/2 mx-auto">
                            <button
                                x-show="loading === true"
                                class="bg-blue-600 hover:bg-blue-500 py-2 px-6 uppercase text-white font-bold flex flex-row items-center justify-center"
                                type="button">
                                <div class="lds-dual-ring mr-6"></div>
                                Working...
                            </button>
    
                            <button
                                x-show="loading === false"
                                class="bg-blue-600 hover:bg-blue-500 py-2 px-6 uppercase text-white font-bold"
                                type="button"
                                @click.prevent="loading = true; document.getElementById('cartAddress').submit()">
                                Go to Checkout
                            </button>
                        </div>
                    </div>
                {{ /simple-commerce:form }}
            </div>
        </div>
    </main>
    <aside class="bg-gray-200 md:h-screen w-full md:w-1/3 md:sticky">
        <div class="py-12 px-10">
            <!-- -->
        </div>
    </aside>
</div>